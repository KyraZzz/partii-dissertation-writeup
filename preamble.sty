% imports
\usepackage[pdfborder={0 0 0}]{hyperref}  % turns references into hyperlinks
\usepackage{graphicx}  % allows inclusion of PDF, PNG and JPG images
\usepackage{fancyhdr}  % for tweaking the running header/footer lines
\usepackage{amsfonts}
\usepackage{amsmath, amssymb}
\usepackage[utf8]{inputenc}
\usepackage{titlesec}
\usepackage{multirow}           % tabular cells spanning multiple
\usepackage{cleveref}
\crefformat{chapter}{\S#1}
\crefformat{section}{\S#2#1#3}
\crefformat{subsection}{\S#2#1#3}
\crefformat{subsubsection}{\S#2#1#3}
\crefrangeformat{section}{\S\S#3#1#4 to~#5#2#6}
\crefmultiformat{section}{\S\S#2#1#3}{ and~#2#1#3}{, #2#1#3}{ and~#2#1#3}


\usepackage{adjustbox}
\usepackage{booktabs}
\usepackage[dvipsnames]{xcolor}
\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{mathtools}
\usepackage{comment}
\usepackage[belowskip=0pt,aboveskip=0pt]{caption}
\usepackage{enumitem}
\usepackage{dsfont}

\definecolor{myblue}{HTML}{377eb8}
\definecolor{myorange}{HTML}{ff7f00}
\definecolor{mygreen}{HTML}{4daf4a}
\definecolor{mypurple}{HTML}{984ea3}
\definecolor{mylightgrey}{HTML}{808588}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}

% fonts
\newcommand*\zapchan{\fontfamily{cmr}\selectfont}

% repository overview
\usepackage{dirtree}

% code highlighting
\usepackage{minted}
\usemintedstyle{murphy}
\usemintedstyle{pastie}
\usemintedstyle{perldoc}

% algorithm and pseudocode
\usepackage{algorithm}
\usepackage{algpseudocode}
\renewcommand{\algorithmicrequire}{\textbf{Input}}
\renewcommand{\algorithmicensure}{\textbf{Params}}
\algdef{SE}% flags used internally to indicate we're defining a new block statement
[CLASS]% new block type, not to be confused with loops or if-statements
{Class}% "\Struct{name}" will indicate the start of the struct declaration
{EndClass}% "\EndStruct" ends the block indent
[1]% There is one argument, which is the name of the data structure
{\textbf{class} \textsc{#1}}% typesetting of the start of a struct
{\textbf{end class}}% typesetting the end of the struct

% page layout
\usepackage[margin=2cm]{geometry}
\setlength{\parindent}{0pt}
\setlength{\parskip}{\medskipamount}
% \renewcommand{\baselinestretch}{1.1}

% title spacing
\titleformat{\chapter}[display]
{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter}{20pt}{\Huge}
\titlespacing*{\chapter}{0pt}{0pt}{10pt}

% don't let large figures hijack entire pages
\renewcommand\topfraction{.9}
\renewcommand\textfraction{.1}
\renewcommand\floatpagefraction{.8}

% get rid of empty pages
\renewcommand{\cleardoublepage}{\clearpage}

\raggedbottom
\sloppy
\clubpenalty1000%
\widowpenalty1000%

% appendix
\usepackage[toc]{appendix}

% append proposal
\usepackage{pdfpages}
\makeatletter
\usepackage{etoolbox}
\newcounter{savedchapter}% for remembering the last chapter number
\preto\appendix{\setcounter{savedchapter}{\arabic{chapter}}}% remembering!
\newcommand\resumechapters{% the \appendix command with some tweaks
  \setcounter{chapter}{\arabic{savedchapter}}% restore chapter number
  \setcounter{section}{0}% reset section counter
  \gdef\@chapapp{\chaptername}% reset chapter name
  \gdef\thechapter{\@arabic\c@chapter}% make chapter numbers arabic
}
\makeatother